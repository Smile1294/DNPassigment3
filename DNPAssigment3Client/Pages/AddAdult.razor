@page "/addAdult"

@attribute [Authorize(Policy = "SecurityLevel5")]
@using DNPAssigment1.Persistance
@using DNPAssigment1.Models
@using global::Models

@inject NavigationManager NavigationManager;
@inject IAdultServices iServices;


<NavBar></NavBar>
<EditForm Model="@newAdult" OnValidSubmit="@Add">
    <DataAnnotationsValidator/>
    <ValidationSummary/>
    <div class="flex justify-center h-full items-center mt-52">
        <div class="bg-gray-200 bg-opacity-70 shadow-md rounded px-8 pt-6 pb-8 mb-4 h-1/2 w-1/2">
            <div class="grid grid-cols-2 gap-4">
                <div class="form-group mb-4">
                    <label class="block text-grey-800 text-sm font-bold mb-2">
                        First Name
                    </label>
                    <InputText class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text" @bind-Value="@newAdult.FirstName"/>
                </div>
                <div class="form-group mb-4">
                    <label class="block text-grey-800 text-sm font-bold mb-2">
                        Last Name
                    </label>
                    <InputText class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text" @bind-Value="@newAdult.LastName"/>
                </div>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div class="form-group mb-4">
                    <label class="block text-grey-800 text-sm font-bold mb-2">
                        Job Title
                    </label>
                    <InputText class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text" @bind-Value="@newAdult.JobTitle.JobTitle"/>
                </div>
                <div class="form-group mb-4">
                    <label class="block text-grey-800 text-sm font-bold mb-2">
                        Salary
                    </label>
                    <InputNumber class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800"  @bind-Value="@newAdult.JobTitle.Salary"/>
                </div>
            </div>
            <div class="grid grid-cols-3 gap-4">
                <div class="form-group mb-4">
                    <label class="block text-grey-800 text-sm font-bold mb-2">
                        Age
                    </label>
                    <InputNumber class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" @bind-Value="@newAdult.Age"/>
                </div>
                <div class="form-group mb-4">
                    <label class="block text-grey-800 text-sm font-bold mb-2">
                        Height
                    </label>
                    <InputNumber class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800"  @bind-Value="@newAdult.Height"/>
                </div>
                <div class="form-group mb-4">
                    <label class="block text-grey-800 text-sm font-bold mb-2">
                        Weight
                    </label>
                    <InputNumber class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" @bind-Value="@newAdult.Weight"/>
                </div>
            </div>
            <div class="form-group mb-4">
                <label class="block text-grey-800 text-sm font-bold mb-2">
                    Sex
                </label>
                <InputText class="shadow appearance-none border rounded w-full py-2 px-3 text-grey-800" type="text" @bind-Value="@newAdult.Sex"/>
            </div>
            <div class="flex items-center justify-center">
                <button class="mt-3 btn bg-gray-900 text-white px-3 py-2 rounded-md text-sm font-medium" type="submit">
                    Submit
                </button>
            </div>
        </div>
    </div>
</EditForm>


@code {

    private Adult newAdult = new (){JobTitle = new Job()};
    

    private void Add()
    {
        iServices.AddAdultAsync(newAdult);
        NavigationManager.NavigateTo("/");
    }

}